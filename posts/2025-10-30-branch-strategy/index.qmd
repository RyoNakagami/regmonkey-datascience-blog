---
title: "Git Flowâ€“based branch strategy"
author: "Ryo Nakagami"
date: "2025-10-30"
date-modified: "2025-10-30"
categories: [ç’°å¢ƒæ§‹ç¯‰, git]
listing_category: development
comments:
  utterances:
       repo: RyoNakagami/regmonkey-datascience-blog
       label: discussion
       issue-term: title
---

## 1. Branch Strategy

- Git Flow ã‚’ãƒ™ãƒ¼ã‚¹ã«ã—ãŸãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥ã‚’æ¡ç”¨
- ãƒªãƒªãƒ¼ã‚¹ç³»åˆ—ãƒ–ãƒ©ãƒ³ãƒï¼Œ`develop`ã‚’çµ±åˆãƒ–ãƒ©ãƒ³ãƒã¨ã™ã‚‹ãŒï¼ŒIssueè¦æ¨¡ãƒ»ãƒªãƒªãƒ¼ã‚¹é‹ç”¨ã®å®Ÿæ…‹ã«åˆã‚ã›ã¦ï¼ŒIssueç”¨ã®çµ±åˆãƒ–ãƒ©ãƒ³ãƒã‚’æ´»ç”¨

```{mermaid}
%%{ init: {
    'theme': 'default',
    'themeVariables': {
        'fontFamily': 'Meiryo'
    },
    'gitGraph': {
        'orientation': 'LR',
        'nodeSpacing': 150,
        'mainBranchName': 'main'
    }
} }%%

gitGraph
   commit id: "" tag: "v1.0.0"

   branch hotfix
   checkout hotfix
   commit id: "BUGFIX"

   checkout main
   branch develop
   checkout develop
   commit id: "é–‹ç™ºé–‹å§‹"

   branch feature/0001/login
   checkout feature/0001/login
   commit id: ""

   checkout main
   merge hotfix tag: "v1.0.1"

   checkout develop
   merge hotfix
   commit id: "incorporate hotfix"

   checkout develop
   merge feature/0001/login
   commit id: "ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½å®Ÿè£…"

   branch release/1.1.x
   checkout release/1.1.x
   commit id: "ãƒªãƒªãƒ¼ã‚¹æº–å‚™"
   commit id: "bugfix"

   checkout develop
   merge release/1.1.x

   checkout main
   merge release/1.1.x  tag: "v1.1.0"

   checkout develop
   commit id: "FEATURE"
```

## 2. ãƒ–ãƒ©ãƒ³ãƒã®ç¨®é¡

### Basic Syntax

```ini
<branch-type>/<issue-number>/<task-description>
```

release ç³»åˆ—ãƒ–ãƒ©ãƒ³ãƒã‚„ hotfix ãƒ–ãƒ©ãƒ³ãƒãªã©ï¼ŒIssueç•ªå·ã‚’å«ã¾ãªã„å ´åˆã‚‚ã‚ã‚Šã¾ã™ï¼ãã®å ´åˆã¯

```ini
release/<major>.<minor>.<patch>
hotfix/<task-description>
```

### å‘½åè¦å‰‡

:::: {.no-border-top-table}

| ãƒ–ãƒ©ãƒ³ãƒç¨®åˆ¥       | å‘½åè¦å‰‡                                    | ç›®çš„                                          |
| ------------ | --------------------------------------- | ------------------------------------------- |
| **æœ¬ç•ªç”¨**      | `main`                                  | æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤å¯èƒ½ãªå®‰å®šç‰ˆã‚³ãƒ¼ãƒ‰ï¼å¸¸ã«ãƒªãƒªãƒ¼ã‚¹æ¸ˆã¿ã®çŠ¶æ…‹ã‚’ä¿æŒ              |
| **é–‹ç™ºç”¨**      | `develop`                               | å…¨æ©Ÿèƒ½ãƒ»ä¿®æ­£ã®çµ±åˆå…ˆï¼ˆãƒ¡ã‚¤ãƒ³é–‹ç™ºãƒ–ãƒ©ãƒ³ãƒï¼‰                       |
| **æ©Ÿèƒ½è¿½åŠ **     | `feature/<issueç•ªå·>/<ã‚¿ã‚¹ã‚¯>`               | æ–°æ©Ÿèƒ½é–‹ç™ºã‚„æ”¹å–„ã‚¿ã‚¹ã‚¯ï¼å°è¦æ¨¡Issueã¯ã“ã®ã¾ã¾developã¸PR         |
| **æ©Ÿèƒ½æ”¹å–„**     | `enhancement/<issueç•ªå·>/<ã‚¿ã‚¹ã‚¯>`           | æ—¢å­˜æ©Ÿèƒ½ã®æ”¹å–„ã‚¿ã‚¹ã‚¯ï¼UXæ”¹å–„ãƒ»å‡¦ç†æœ€é©åŒ–ãªã©                     |
| **ãƒã‚°ä¿®æ­£**     | `bugfix/<issueç•ªå·>/<ã‚¿ã‚¹ã‚¯>`                | ä¸å…·åˆä¿®æ­£ç”¨ãƒ–ãƒ©ãƒ³ãƒï¼ãƒ†ã‚¹ãƒˆå¾Œdevelopã¸çµ±åˆ                   |
| **Issueçµ±åˆ**  | `issue/<issueç•ªå·>`                       | **ä¸­ã€œå¤§è¦æ¨¡Issueã®å ´åˆã®ã¿**ä½œæˆï¼è¤‡æ•°ã‚µãƒ–ã‚¿ã‚¹ã‚¯ã‚’çµ±åˆã™ã‚‹ãŸã‚ã®çµ±åˆãƒ–ãƒ©ãƒ³ãƒ |
| **ãƒªãƒªãƒ¼ã‚¹ç³»åˆ—**   | `release/<major>.<minor>.x`             | ç‰¹å®šãƒã‚¤ãƒŠãƒ¼ç³»åˆ—ï¼ˆä¾‹: 1.1.xï¼‰ã®å®‰å®šç¶­æŒãƒ»è»½å¾®ä¿®æ­£å¯¾å¿œç”¨ï¼ˆé•·å¯¿å‘½ï¼‰        |
| **ãƒªãƒªãƒ¼ã‚¹æº–å‚™**   | `release/<version>/create-release-note` | ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆä½œæˆãƒ»ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºå®šãƒ»ã‚¿ã‚°æº–å‚™ç”¨ï¼ˆçŸ­å‘½ï¼‰                 |
| **ç·Šæ€¥ä¿®æ­£**     | `hotfix/<issueç•ªå·>`                      | æœ¬ç•ªç’°å¢ƒå‘ã‘ã®å³æ™‚ä¿®æ­£ï¼ä¿®æ­£å¾Œ main / develop ä¸¡æ–¹ã«åæ˜         |
| **ãƒ†ã‚¹ãƒˆæ¤œè¨¼ç”¨**   | `test/<issueç•ªå·>/<ã‚¿ã‚¹ã‚¯>`                           | ä¸€æ™‚çš„ãªãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ãƒ»æ¤œè¨¼ç”¨ãƒ–ãƒ©ãƒ³ãƒï¼æ¤œè¨¼å®Œäº†å¾Œå‰Šé™¤                  |
| **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™** | `docs/<issueç•ªå·>/<ã‚¿ã‚¹ã‚¯>`                           | ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ»ã‚¬ã‚¤ãƒ‰ãƒ»READMEæ›´æ–°ãªã©ã®ãŸã‚ã®ãƒ–ãƒ©ãƒ³ãƒ               |
| **ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°** | `refactor/<issueç•ªå·>/<ã‚¿ã‚¹ã‚¯>`                       | æŒ™å‹•ã‚’å¤‰ãˆãšã«å†…éƒ¨æ§‹é€ ã‚’æ”¹å–„ã™ã‚‹ãŸã‚ã®ãƒ–ãƒ©ãƒ³ãƒ                     |
| **æ¤œè¨¼ãƒ»è©¦ä½œç”¨**   | `sandbox/<ã‚¿ã‚¹ã‚¯>`                        | æ–°ã—ã„ã‚¢ã‚¤ãƒ‡ã‚¢ã‚„PoCã‚’è©¦ã™ãŸã‚ã®å®Ÿé¨“çš„ãƒ–ãƒ©ãƒ³ãƒï¼ˆéå…¬å¼ï¼‰ï¼å®‰å®šç‰ˆã«ãƒãƒ¼ã‚¸ã—ãªã„å‰æ  |
: {tbl-colwidths="[20,40,40]"}

::::



### å‘½åä¾‹

:::: {.no-border-top-table}

| ãƒ–ãƒ©ãƒ³ãƒå                             | ç”¨é€”                |
| --------------------------------- | ----------------- |
| `feature/0123-add-login`             | æ–°æ©Ÿèƒ½               |
| `bugfix/0123-fix-login-error`        | ä¿®æ­£                |
| `issue/0123`                         | è¤‡æ•°ã‚µãƒ–ã‚¿ã‚¹ã‚¯ã‚’å«ã‚€Issueçµ±åˆ |
| `release/1.1.x`                     | 1.1 ç³»åˆ—ã®ãƒªãƒªãƒ¼ã‚¹ç¶­æŒ     |
| `release/1.1.1/create-release-note` | 1.1.1 ãƒªãƒªãƒ¼ã‚¹æº–å‚™      |
| `hotfix/0145-critical-fix`           | ç·Šæ€¥å¯¾å¿œ              |
: {tbl-colwidths="[40,60]"}

::::



## 3. é–‹ç™ºãƒ•ãƒ­ãƒ¼

### Step 1. ã‚µãƒ–ã‚¿ã‚¹ã‚¯é–‹ç™º

å„Issueã«å¯¾ã—ã¦ã€å¿…è¦ãªã‚µãƒ–ã‚¿ã‚¹ã‚¯ã”ã¨ã«ãƒ–ãƒ©ãƒ³ãƒã‚’åˆ‡ã‚Šã¾ã™ï¼

```bash
git switch develop
git switch -c feature/0123/add-login
git switch -c bugfix/0123/fix-login-error
```

- å°è¦æ¨¡Issueãªã‚‰ã€ã“ã®ã¾ã¾ develop ã«ç›´æ¥PR(Step3ã¸)
- ä¸­ã€œå¤§è¦æ¨¡Issueãªã‚‰ï¼ŒIssueçµ±åˆãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆã—ï¼Œã‚µãƒ–ã‚¿ã‚¹ã‚¯ã‚’ã¾ã¨ã‚ã‚‹ (Step 2ã¸)

### Step 2. ä¸­ã€œå¤§è¦æ¨¡Issueã®çµ±åˆãƒ–ãƒ©ãƒ³ãƒï¼ˆä»»æ„ï¼‰

è¤‡æ•°ã®ã‚µãƒ–ã‚¿ã‚¹ã‚¯ã‚’ã¾ã¨ã‚ã¦ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ãŸã„å ´åˆã«ã®ã¿ä½œæˆã—ã¾ã™ï¼

```bash
git switch develop
git switch -c issue/0123
git merge feature/0123/add-login
git merge bugfix/0123/fix-login-error
git push -u origin issue/0123
```

- çµ±åˆPRã‚’ä½œæˆï¼š`issue/0123` â†’ `develop`
- ãƒãƒ¼ãƒ å˜ä½ã§ã¾ã¨ã‚ã¦ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ãƒ†ã‚¹ãƒˆã‚’å®Ÿæ–½

### Step 3. developã¸ã®çµ±åˆ

- Issueå˜ä½ã¾ãŸã¯ã‚µãƒ–ã‚¿ã‚¹ã‚¯å˜ä½ã§ `develop` ã«PRä½œæˆ
- ãƒ­ãƒ¼ã‚«ãƒ«ã§å®Ÿè¡Œã™ã‚‹å ´åˆã¯ `git merge --no-ff` ã§å¯¾å¿œ

### Step 4. ãƒªãƒªãƒ¼ã‚¹ç³»åˆ—ãƒ–ãƒ©ãƒ³ãƒä½œæˆ

- é–‹ç™ºãŒå®‰å®šã—ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ãƒã‚¤ãƒŠãƒ¼ç³»åˆ—ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ
- ãƒ–ãƒ©ãƒ³ãƒä½œæˆã¯é–‹ç™ºè¦æ¨¡ã«å¿œã˜ã¦ï¼Œ`git switch -c` ã¾ãŸã¯ GitHub Actionsã§å®Ÿæ–½

```bash
git switch develop
git switch -c release/1.1.x
git push -u origin release/1.1.x
```

### Step 5. ãƒªãƒªãƒ¼ã‚¹æº–å‚™ãƒ–ãƒ©ãƒ³ãƒ

```bash
git switch release/1.1.x
git switch -c release/1.1.1/0130/create-release-note
```

- ä½œæ¥­å†…å®¹ä¾‹:
  - ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆæ›´æ–°
  - ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·æ›´æ–° (`__version__.py` ãªã©)
  - æœ€çµ‚ãƒ†ã‚¹ãƒˆã€ä¿®æ­£
- PRä½œæˆï¼š`release/1.1.1/create-release-note` â†’ `release/1.1.x`

### Step 6. ãƒªãƒªãƒ¼ã‚¹ç¢ºå®š

- GitHub Release ãƒšãƒ¼ã‚¸ã«æ­£å¼ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã‚’å…¬é–‹
- git ã‚¿ã‚°ã‚’ä»˜ä¸ã—ï¼Œ`main` ãƒ–ãƒ©ãƒ³ãƒã«ãƒãƒ¼ã‚¸

### Step 7. main / develop ã¸ã®åæ˜ 

```bash
# æœ¬ç•ªç”¨
git switch main
git merge --ff release/1.1.x
git push origin main

# é–‹ç™ºç”¨
git switch develop
git merge --ff release/1.1.x
git push origin develop
```


::: {.callout-note}
### é‹ç”¨ãƒã‚¤ãƒ³ãƒˆ

:::: {.no-border-top-table}

| å¯¾è±¡ | ãƒ–ãƒ©ãƒ³ãƒå‘½åè¦å‰‡ | ç”¨é€”ãƒ»å¯¾è±¡ç¯„å›² | é‹ç”¨æ–¹é‡ |
|------|------------------|----------------|-----------|
| **å°è¦æ¨¡ Issue** | `feature/<issueç•ªå·>-<ã‚¿ã‚¹ã‚¯>` | å°è¦æ¨¡ãªæ–°æ©Ÿèƒ½ãƒ»ä¿®æ­£ <br> `develop` ã«ç›´æ¥ PR | å˜ä¸€ã‚¿ã‚¹ã‚¯ãƒ»è»½å¾®ä¿®æ­£ã«é©ç”¨ |
| **ä¸­ã€œå¤§è¦æ¨¡ Issue** | `issue/<issueç•ªå·>` | è¤‡æ•°ã‚µãƒ–ã‚¿ã‚¹ã‚¯ã‚’çµ±åˆ | ã‚µãƒ–ã‚¿ã‚¹ã‚¯ã‚’çµ±åˆã—ã¦ `develop` ã« PR <br> `feature` / `bugfix` ã‚’ã¾ã¨ã‚ã¦ãƒ¬ãƒ“ãƒ¥ãƒ¼ |
| **ãƒªãƒªãƒ¼ã‚¹ç³»åˆ—ãƒ–ãƒ©ãƒ³ãƒ** | `release/<major>.<minor>.x` | ç‰¹å®šãƒã‚¤ãƒŠãƒ¼ç³»åˆ—ï¼ˆä¾‹: 1.1.xï¼‰ | å®‰å®šç‰ˆç¶­æŒãƒ»è»½å¾®ä¿®æ­£å¯¾å¿œ <br> é•·å¯¿å‘½ãƒ–ãƒ©ãƒ³ãƒï¼ä¿å®ˆãƒ»æ¤œè¨¼ã«åˆ©ç”¨ |
| **ãƒªãƒªãƒ¼ã‚¹æº–å‚™ãƒ–ãƒ©ãƒ³ãƒ** | `release/<version>/<subtask>` | å„ãƒ‘ãƒƒãƒãƒªãƒªãƒ¼ã‚¹ï¼ˆä¾‹: 1.1.1ï¼‰ | ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆä½œæˆãƒ»ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºå®šãƒ»PRä½œæˆãªã© <br> çŸ­å‘½ãƒ–ãƒ©ãƒ³ãƒï¼å®Œäº†å¾Œå‰Šé™¤ |
: {tbl-colwidths="[18,24,24,24]"}

::::


:::



## 4. ãƒ–ãƒ©ãƒ³ãƒå‰Šé™¤ãƒãƒªã‚·ãƒ¼

:::: {.no-border-top-table}

| ãƒ–ãƒ©ãƒ³ãƒç¨®åˆ¥                                | å‰Šé™¤ã‚¿ã‚¤ãƒŸãƒ³ã‚°          | å‚™è€ƒ               |
| ------------------------------------- | ---------------- | ---------------- |
| `feature` / `bugfix` / `issue`          | develop ãƒãƒ¼ã‚¸å¾Œ     | å³å‰Šé™¤ï¼ˆå¿…è¦ãªã‚‰ã‚¿ã‚°ã§å±¥æ­´è¿½è·¡ï¼‰ |
| `release/<version>/<subtask>`           | mainãƒ»develop åæ˜ å¾Œ | å‰Šé™¤               |
| `release/<series>.x`                    | æ¬¡ãƒã‚¤ãƒŠãƒ¼ç³»åˆ—ç™ºè¶³æ™‚       | ç¶™ç¶šä¿å®ˆä¸­ã¯æ®‹ã™         |
: {tbl-colwidths="[30,35,35]"}

::::



## 5. æ³¨æ„äº‹é …

::: {.callout-important}
### Rule 1: å°æ–‡å­—ã¨ãƒã‚¤ãƒ•ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹

- ãƒ–ãƒ©ãƒ³ãƒåã¯å¸¸ã«å°æ–‡å­—ã§è¨˜è¿°
- å¤§æ–‡å­—ã‚’å«ã‚ã‚‹ã¨ï¼Œãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ãŒå¤§æ–‡å­—ãƒ»å°æ–‡å­—ã‚’åŒºåˆ¥ã™ã‚‹ç’°å¢ƒãŒã‚ã‚‹
- å˜èªã®åŒºåˆ‡ã‚Šã«ã¯ãƒã‚¤ãƒ•ãƒ³ï¼ˆ`-`ï¼‰ã‚’ä½¿ç”¨
:::

**ğŸ“˜ Example**

- âœ… Good: `feature/user-login`
- âŒ Avoid: `Feature_UserLogin`, `FeatUserLogin`

::: {.callout-important}
### Rule 2: æ˜ç¢ºãªãƒˆãƒ¼ã‚¯ãƒ³ã‹ã‚‰ãƒ–ãƒ©ãƒ³ãƒåã‚’é–‹å§‹ã™ã‚‹

- å„ãƒ–ãƒ©ãƒ³ãƒåã¯ã€ç›®çš„ã‚’ç¤ºã™ã‚«ãƒ†ã‚´ãƒªãƒˆãƒ¼ã‚¯ãƒ³ã‹ã‚‰å§‹ã‚ã¾ã™ã€‚
- ãƒˆãƒ¼ã‚¯ãƒ³ã®ä¾‹ï¼š
  - `feature`ï¼ˆæ–°æ©Ÿèƒ½é–‹ç™ºï¼‰
  - `bugfix`ï¼ˆãƒã‚°ä¿®æ­£ï¼‰
  - `docs`ï¼ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°ï¼‰
- ãƒˆãƒ¼ã‚¯ãƒ³ã¨èª¬æ˜æ–‡ã¯ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ï¼ˆ`/`ï¼‰ã§åŒºåˆ‡ã‚‹
:::

**ğŸ“˜ Example**

- âœ… Example: `bugfix/payment-timeout`
- âŒ Avoid: `payment-timeout` (purpose unclear)

**æ´»ç”¨ä¾‹**

```bash
# Listing branches by token
$ git branch --list "feature/*"

# Pushing or mapping branches with tokens
$ git push origin 'refs/heads/feature/*'

# Deleting multiple branches by token
$ git branch -D $(git branch --list "feature/*")
```

::: {.callout-important}
### Rule 3: ãƒ–ãƒ©ãƒ³ãƒåã¯ç°¡æ½”ãƒ»æ˜ç¢ºã«

- æ„å›³ã‚’èª¬æ˜ã§ãã‚‹ç¯„å›²ã§ï¼Œé•·ã™ãã‚‹åå‰ã¯é¿ã‘ã‚‹
- é•·ã™ãã‚‹ãƒ–ãƒ©ãƒ³ãƒåã¯ï¼Œãƒ­ã‚°è¡¨ç¤ºã®ä¸€è¡Œã«åã¾ã‚‰ãšï¼Œå¯è¦–æ€§ãŒä¸‹ãŒã‚‹ãŸã‚
:::

**ğŸ“˜ Example**

- âœ… è‰¯ã„ä¾‹: `refactor/api-headers`
- âŒ æ‚ªã„ä¾‹: `refactor/update-the-way-we-handle-request-headers-in-api`

::: {.callout-important}
### Rule 4: è¡çªã‚’ç”Ÿã‚€å¯èƒ½æ€§ã®ã‚ã‚‹ãƒ–ãƒ©ãƒ³ãƒã¯ä½œã‚‰ãªã„

- `git switch -c feature` ã®ã‚ˆã†ã«æ„å›³ãŒä¸æ˜ç­ãªåå‰ã‚„æ—¢å­˜ãƒ–ãƒ©ãƒ³ãƒã¨è¡çªã™ã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹åå‰ã¯é¿ã‘ã‚‹
- Gitã¯å†…éƒ¨çš„ã« ãƒ–ãƒ©ãƒ³ãƒåã‚’ãƒ‘ã‚¹ï¼ˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ï¼‰ã¨ã—ã¦ç®¡ç†ã—ã¦ã„ã‚‹ãŸã‚ï¼Œ`feature` ãŒä½œæˆã•ã‚Œã¦ã„ã‚‹ã¨ `feature/login-v2` ãŒåå‰è¡çªã—ã¦ä½œæˆã§ããªããªã£ã¦ã—ã¾ã†
  - åŒã˜éšå±¤ã«ãƒ•ã‚¡ã‚¤ãƒ«ã¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’åŒæ™‚ã«ä½œã‚Œãªã„ãŸã‚

:::

**ğŸ“˜ Example**

```bash
$ git switch -c bugfix/0123/fix-login-error
Switched to a new branch 'bugfix/0123/fix-login-error'

$ ls .git/refs/heads/bugfix/0123
fix-login-error
```

## Appendix: ãªãœbranchã¯åå‰è¡çªã™ã‚‹ã®ã‹ï¼Ÿ

[Commit Object]{.mini-section}

Gitã®ã‚³ã‚¢ã®éƒ¨åˆ†ã¯ã‚·ãƒ³ãƒ—ãƒ«ãªã‚­ãƒ¼ãƒ»ãƒãƒªãƒ¥ãƒ¼å‹ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢ã§ã™ï¼Gitã§è¿½è·¡ã•ã‚Œã¦ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«(blob)ã¯ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®çŠ¶æ…‹ï¼ˆãƒ„ãƒªãƒ¼ï¼‰ã¨åˆã‚ã›ã¦åœ§ç¸®ã•ã‚ŒãŸ `.git/objects` ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ä¿å­˜ã•ã‚Œã¾ã™ï¼
`git commit` ã‚’å®Ÿè¡Œã™ã‚‹ã¨ï¼Œcommitæ™‚ç‚¹ã§ã®ãã®çŠ¶æ…‹ã‚’ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã¨ã—ã¦

- èª°ãŒ(`user.name`, `user.email`)
- ã„ã¤(ç¾åœ¨ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—)
- ã©ã‚“ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ®‹ã—ã¦
- ã©ã®commitã®ã‚ã¨ã«ï¼ˆ=è¦ªã‚³ãƒŸãƒƒãƒˆæƒ…å ±ï¼‰
- ã‚³ãƒŸãƒƒãƒˆãŒä½œæˆã•ã‚ŒãŸæ™‚ç‚¹ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã®ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã®ãƒ„ãƒªãƒ¼

ã‚’è¨˜éŒ²ã—ã¾ã™ï¼ã“ã‚ŒãŒ[ã‚³ãƒŸãƒƒãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ]{.regmonkey-bold}ã§ã™ï¼ã“ã®ã‚³ãƒŸãƒƒãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’valueã¨ã™ã‚‹ã¨ï¼Œãã‚Œã«å¯¾å¿œã™ã‚‹SHA-1ãƒãƒƒã‚·ãƒ¥å€¤ãŒã‚­ãƒ¼ã¨ãªã‚Šã¾ã™ï¼

```ini
.git/HEAD
    â”‚
    â””â”€ ref: refs/heads/main
           â”‚
           â””â”€ SHA-1 commit object (latest commit)
                  â”‚
                  â”œâ”€ tree object
                  â”‚     â”œâ”€ blob (file1)
                  â”‚     â””â”€ blob (file2)
                  â””â”€ parent commit(s)
```

[ãƒ–ãƒ©ãƒ³ãƒã¯ãƒã‚¤ãƒ³ã‚¿ãƒ¼]{.mini-section}

å„ãƒ–ãƒ©ãƒ³ãƒã¯ãƒ–ãƒ©ãƒ³ãƒè‡ªä½“ãŒå®Ÿä½“ã‚’æŒã£ã¦ã„ã‚‹ã®ã§ã¯ãªãï¼Œã©ã®commit objectã‚’å‚ç…§ã—ã¦ã„ã‚‹ã‹ï¼Ÿã§çŠ¶æ…‹ãŒç®¡ç†ã•ã‚Œã¦ã„ã¾ã™ï¼ã“ã“ã§ç™»å ´ã™ã‚‹ã®ãŒ `refs/heads/<branch-name>` ã§ã™ï¼
`main` ãƒ–ãƒ©ãƒ³ãƒãŒå‚ç…§ã™ã‚‹Commit Objectã¯ `.git/refs/heads/main` ã«è¨˜éŒ²ã•ã‚Œã¦ãŠã‚Š

```zsh
% cat .git/refs/heads/main
35f61422e59fb8b34bf3a85f82a71669c1eeec30
```

`git add` & `git commit` ã‚’å®Ÿè¡Œã™ã‚‹ã¨ï¼Œã“ã®å€¤ãŒæ–°ãŸãªCommit Objectã¸ã®å‚ç…§ã¸ã¨æ›¸ãæ›ã‚ã‚Šã¾ã™ï¼


[ãªãœãƒ–ãƒ©ãƒ³ãƒã¯åå‰è¡çªã™ã‚‹ã®ã‹ï¼Ÿ]{.mini-section}

ä¸Šè¨˜ã®ã‚ˆã†ã«ãƒ–ãƒ©ãƒ³ãƒã®æƒ…å ±ã¯ `.git/refs/heads/<branch-name>` ã§ç®¡ç†ã•ã‚Œã¦ã„ã¾ã™ï¼`git switch -c develop` ã¨ã™ã‚‹ã¨

```zsh
% git switch -c develop
Switched to a new branch 'develop'

% cat .git/refs/heads/develop
35f61422e59fb8b34bf3a85f82a71669c1eeec30
```

ã¨ãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã¾ã™ï¼ã—ã‹ã—ï¼Œãƒ–ãƒ©ãƒ³ãƒåã« `/` ã‚’å«ã‚€å ´åˆã ã¨

```zsh
% git switch -c bugfix/0001/test
Switched to a new branch 'bugfix/0001/test'

% tree .git/refs/heads/
.git/refs/heads/
â”œâ”€â”€ bugfix
â”‚   â””â”€â”€ 0001
â”‚       â””â”€â”€ test
â”œâ”€â”€ develop
â””â”€â”€ main
```

ã¨ `bugfix/0001/test` ã®`/`(ã‚¹ãƒ©ãƒƒã‚·ãƒ¥)ãŒãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåŒºåˆ‡ã‚Šã¨è§£é‡ˆã•ã‚Œã¦ã—ã¾ã—ã¾ã™ï¼`develop`ãƒ–ãƒ©ãƒ³ãƒãŒã‚ã‚‹çŠ¶æ…‹ã§ `develop/test` ã‚’ä½œæˆã—ã‚ˆã†ã¨ã™ã‚‹ã¨ï¼Œ
`.git/refs/heads/develop/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã¦ã‹ã‚‰ï¼Œãã®ä¸‹ã« `test` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã‚ˆã†ã¨ã—ã¾ã™ãŒï¼Œã™ã§ã«`develop` ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹ = åŒå§“åŒåã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’åŒã˜å±¤ã§ã¯ä½œæˆã§ããªã„ã¨ã„ã†çŠ¶æ…‹ãŒç™ºç”Ÿã—ã¾ã™

ãã®ãŸã‚ï¼Œ

```zsh
% git switch -c develop/test
fatal: cannot lock ref 'refs/heads/develop/test': 'refs/heads/develop' exists; cannot create 'refs/heads/develop/test'
```

ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™ï¼


References
----------
- [10.2 Gitã®å†…å´ - Gitã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ](https://git-scm.com/book/ja/v2/Git%E3%81%AE%E5%86%85%E5%81%B4-Git%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88)
